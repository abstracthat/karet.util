!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("kefir.atom"),require("kefir"),require("infestines"),require("partial.lenses"),require("kefir.combines"),require("react")):"function"==typeof define&&define.amd?define(["exports","kefir.atom","kefir","infestines","partial.lenses","kefir.combines","react"],r):r((t.karet=t.karet||{},t.karet.util={}),t.kefir.atom,t.Kefir,t.I,t.L,t.kefir.combines,t.React)}(this,function(t,r,n,e,i,o,c){"use strict";var a=function(t){return t instanceof n.Observable},u=function(t){},f=function(t){return a(t)?t:n.constant(t)},l=e.curry(function(t,r){return f(r).debounce(t)}),s=n.merge,h=e.curry(function(t,r){return f(r).delay(t)}),p=e.curry(function(t,r){return f(r).concat(f(t))}),y=e.curry(function(t,r){return f(r).map(t)}),v=e.curry(function(t,r){return f(r).flatMap(e.pipe2U(t,f))}),m=e.curry(function(t,r){return f(r).flatMapConcat(e.pipe2U(t,f))}),d=e.curry(function(t,r){return f(r).flatMapErrors(e.pipe2U(t,f))}),M=e.curry(function(t,r){return f(r).flatMapLatest(e.pipe2U(t,f))}),g=e.curry(function(t,r,n){return f(n).scan(t,r)}),R=e.curry(n.interval),b=e.curry(n.later),k=n.never(),w=e.curry(function(t,r){return f(r).onAny((n=t,function(t){var r;return(r=n[t.type])&&r(t.value)}));var n}),E=e.curry(function(t,r){return f(r).sampledBy(t)}),q=e.curry(function(t,r){return f(r).skip(t)}),P=e.curry(function(t,r){return f(r).skipDuplicates(t)}),x=P(e.identicalU),A=e.curry(function(t,r){return f(r).filter(t)}),U=e.curry(function(t,r){return f(r).filter(function(r){return!t(r)})}),S=e.curry(function(t,r){return f(r).toProperty(function(){return t})}),_=e.pipe2U(S(void 0),o.lift1(u)),B=e.curry(function(t,r){return f(r).take(t)}),C=e.curry(function(t,r){return f(r).takeErrors(t)}),D=e.curry(function(t,r){return f(r).takeUntilBy(t)}),j=function(t){return f(t).toProperty()},F=e.curry(function(t,r){return f(r).throttle(t)}),N=e.curry(n.fromEvents),O=function(t,r,n){return j(M(function(t){return t?r:n},t))},V=e.curry(O),W=e.curry(function(t,r){return O(t,void 0,r)}),z=e.arityN(2,O),I=n.Stream.prototype,J=e.inherit(function(){n.Stream.call(this)},n.Stream,{push:I._emitValue,error:I._emitError,end:I._emitEnd}),L=function(t){return o.combines(t,e.id)},K=o.liftRec(e.curry(function(t,r){return void 0!==r&&t(r),r})),T=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return i.iso(function(t){return console.log.apply(console,r.concat([t]))||t},function(t){return console.log.apply(console,r.concat([t,"(set)"]))||t})},G=c.createContext(e.object0),H=G.Provider,Q=G.Consumer,X=(0,e.id)(function(t){return c.createElement(H,{value:t.context},t.children)}),Y=(0,e.id)(function(t){return function(r){return c.createElement(Q,null,function(n){return t(r,n)})}}),Z=o.liftRec(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(){for(var t=0,n=r.length;t<n;++t)e.isFunction(r[t])&&r[t].apply(r,arguments)}}),$=i.join(" ",[i.flatten,i.when(e.id)]),tt=o.liftRec(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return $(r)||void 0}),rt=o.liftRec(JSON.parse),nt=o.liftRec(JSON.stringify),et=o.liftRec(Math.abs),it=o.liftRec(Math.acos),ot=o.liftRec(Math.acosh),ct=o.liftRec(Math.asin),at=o.liftRec(Math.asinh),ut=o.liftRec(Math.atan),ft=o.liftRec(Math.atan2),lt=o.liftRec(Math.atanh),st=o.liftRec(Math.cbrt),ht=o.liftRec(Math.ceil),pt=o.liftRec(Math.clz32),yt=o.liftRec(Math.cos),vt=o.liftRec(Math.cosh),mt=o.liftRec(Math.exp),dt=o.liftRec(Math.expm1),Mt=o.liftRec(Math.floor),gt=o.liftRec(Math.fround),Rt=o.liftRec(Math.hypot),bt=o.liftRec(Math.imul),kt=o.liftRec(Math.log),wt=o.liftRec(Math.log10),Et=o.liftRec(Math.log1p),qt=o.liftRec(Math.log2),Pt=o.liftRec(Math.max),xt=o.liftRec(Math.min),At=o.liftRec(Math.pow),Ut=o.liftRec(Math.round),St=o.liftRec(Math.sign),_t=o.liftRec(Math.sin),Bt=o.liftRec(Math.sinh),Ct=o.liftRec(Math.sqrt),Dt=o.liftRec(Math.tan),jt=o.liftRec(Math.tanh),Ft=o.liftRec(Math.trunc),Nt=o.liftRec(String.raw),Ot=e.curry(function(t,r){var n=o.combines(r,function(r){return t.set(r)});if(a(n))return n.toProperty(u)}),Vt=e.curry(function(t,n){return n instanceof r.AbstractMutable?a(L(t))?new r.Join(o.combines(t,function(t){return n.view(t)})):n.view(t):o.combines(t,n,i.get)}),Wt=e.curry(function(t,r){var n=[];return e.seq(r,g(function(e,i){var o=e.length,c=i.length;if(c===o)return e;for(var a=Math.min(o,c),u=e.slice(0,a),f=c;f<o;++f)n[f]._onDeactivation();for(var l=a;l<c;++l)u[l]=t(n[l]=Vt(l,r),l);return n.length=c,u},[]),x)}),zt=e.curry(function(t,r,n){var o=new Map,c=i.get(t),a=function(t,r,n){return c(t)===n.id};return e.seq(n,g(function(t,e){for(var u=e.length,f=t.length===u?t:Array(u),l=0;l<u;++l){var s=c(e[l]),h=o.get(s);void 0===h&&(o.set(s,h={}),h.id=s,h.hint=l,h.elem=r(h.view=Vt(i.find(a,h),n),s)),f[l]!==h.elem&&(h.hint=l,f===t&&(f=f.slice(0)),f[l]=h.elem)}return f!==t&&o.forEach(function(t,r){f[t.hint]!==t.elem&&(t.view._onDeactivation(),o.delete(r))}),f},[]),x)});t.holding=r.holding,t.seq=e.seq,t.seqPartial=e.seqPartial,t.combines=o.combines,t.liftRec=o.liftRec,t.debounce=l,t.changes=function(t){return f(t).changes()},t.serially=function(t){return n.concat(t.map(f))},t.parallel=s,t.delay=h,t.endWith=p,t.mapValue=y,t.flatMapParallel=v,t.flatMapSerial=m,t.flatMapErrors=d,t.flatMapLatest=M,t.foldPast=g,t.interval=R,t.later=b,t.lazy=function(t){return e.seq(j(),M(t),j)},t.never=k,t.on=w,t.sampledBy=E,t.skipFirst=q,t.skipDuplicates=P,t.skipIdenticals=x,t.skipUnless=A,t.skipWhen=U,t.startWith=S,t.sink=_,t.takeFirst=B,t.takeFirstErrors=C,t.takeUntilBy=D,t.toProperty=j,t.throttle=F,t.fromEvents=N,t.ignoreValues=function(t){return t.ignoreValues()},t.ignoreErrors=function(t){return t.ignoreErrors()},t.ifElse=V,t.unless=W,t.when=z,t.cond=function(t){for(var r=arguments.length,n=void 0;r--;){var e=arguments[r];n=1!==e.length?O(e[0],e[1],n):e[0]}return n},t.Bus=J,t.bus=function(){return new J},t.scope=function(t){return t()},t.template=L,t.tapPartial=K,t.toPartial=function(t){return o.liftRec(e.arityN(t.length,function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.every(e.isDefined)?t.apply(void 0,n):void 0}))},t.thru=function(t){for(var r=arguments.length,n=void 0,e=1;e<r;++e){var i=arguments[e];n?n.push(i):a(i)?n=[i]:t=i(t)}return n?j(M(function(r){return function(t,r){for(var n=0,e=r.length;n<e;++n)t=r[n](t);return t}(t,r)},L(n))):t},t.show=function(t){for(var r=arguments.length-1,n=Array(r+1),e=0;e<r;++e)n[e]=arguments[e];return n[r]=T,Vt(o.combines.apply(null,n),arguments[r])},t.onUnmount=function(t){return n.stream(e.always(t)).toProperty(e.always(void 0))},t.Context=X,t.withContext=Y,t.getProps=function(t){return function(r){var n=r.target;for(var e in t)t[e].set(n[e])}},t.setProps=function(t){var r=void 0,n=void 0;return function(e){n&&(r.offAny(n),r=n=null),e&&(n=function(t){switch(t.type){case"value":var i=t.value;for(var o in i)e[o]=i[o];break;case"error":throw t.value;case"end":r=n=null}},(r=L(t)).onAny(n))}},t.refTo=function(t){return function(r){null!==r&&t.set(r)}},t.actions=Z,t.cns=tt,t.parse=rt,t.stringify=nt,t.abs=et,t.acos=it,t.acosh=ot,t.asin=ct,t.asinh=at,t.atan=ut,t.atan2=ft,t.atanh=lt,t.cbrt=st,t.ceil=ht,t.clz32=pt,t.cos=yt,t.cosh=vt,t.exp=mt,t.expm1=dt,t.floor=Mt,t.fround=gt,t.hypot=Rt,t.imul=bt,t.log=kt,t.log10=wt,t.log1p=Et,t.log2=qt,t.max=Pt,t.min=xt,t.pow=At,t.round=Ut,t.sign=St,t.sin=_t,t.sinh=Bt,t.sqrt=Ct,t.tan=Dt,t.tanh=jt,t.trunc=Ft,t.string=Nt,t.atom=function(t){return new r.Atom(t)},t.variable=function(){return new r.Atom},t.molecule=function(t){return new r.Molecule(t)},t.set=Ot,t.view=Vt,t.mapElems=Wt,t.mapElemsWithIds=zt,Object.defineProperty(t,"__esModule",{value:!0})});
