!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("kefir.atom"),require("kefir"),require("infestines"),require("partial.lenses"),require("kefir.combines"),require("react")):"function"==typeof define&&define.amd?define(["exports","kefir.atom","kefir","infestines","partial.lenses","kefir.combines","react"],r):r((t.karet=t.karet||{},t.karet.util={}),t.kefir.atom,t.Kefir,t.I,t.L,t.kefir.combines,t.React)}(this,function(t,r,n,e,i,o,a){"use strict";var u=function(t){return t instanceof n.Observable},c=function(t){},f=function(t){return u(t)?t:n.constant(t)},l=e.curry(function(t,r){return f(r).debounce(t)}),s=n.merge,h=e.curry(function(t,r){return f(r).delay(t)}),p=e.curry(function(t,r){return f(r).concat(f(t))}),y=e.curry(function(t,r){return f(r).map(t)}),v=e.curry(function(t,r){return f(r).flatMap(e.pipe2U(t,f))}),m=e.curry(function(t,r){return f(r).flatMapConcat(e.pipe2U(t,f))}),d=e.curry(function(t,r){return f(r).flatMapErrors(e.pipe2U(t,f))}),g=e.curry(function(t,r){return f(r).flatMapLatest(e.pipe2U(t,f))}),M=e.curry(function(t,r,n){return f(n).scan(t,r)}),R=e.curry(n.interval),b=e.curry(n.later),k=n.never(),w=e.curry(function(t,r){return f(r).onAny((n=t,function(t){var r;return(r=n[t.type])&&r(t.value)}));var n}),P=e.curry(function(t,r){return f(r).sampledBy(t)}),E=e.curry(function(t,r){return f(r).skip(t)}),q=e.curry(function(t,r){return f(r).skipDuplicates(t)}),x=q(e.identicalU),A=e.curry(function(t,r){return f(r).filter(t)}),U=e.curry(function(t,r){return f(r).filter(function(r){return!t(r)})}),D=e.curry(function(t,r){return f(r).toProperty(function(){return t})}),S=e.pipe2U(D(void 0),o.lift1(c)),_=e.curry(function(t,r){return f(r).take(t)}),B=e.curry(function(t,r){return f(r).takeErrors(t)}),C=e.curry(function(t,r){return f(r).takeUntilBy(t)}),j=function(t){return f(t).toProperty()},F=e.curry(function(t,r){return f(r).throttle(t)}),N=e.curry(n.fromEvents),O=function(t,r,n){return j(g(function(t){return t?r:n},t))},V=e.curry(O),W=e.curry(function(t,r){return O(t,void 0,r)}),z=e.arityN(2,O),I=n.Stream.prototype,J=e.inherit(function(){n.Stream.call(this)},n.Stream,{push:I._emitValue,error:I._emitError,end:I._emitEnd}),L=function(t){return o.combines(t,e.id)},K=o.liftRec(e.curry(function(t,r){return void 0!==r&&t(r),r})),T=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return i.iso(function(t){return console.log.apply(console,r.concat([t]))||t},function(t){return console.log.apply(console,r.concat([t,"(set)"]))||t})},G=a.createContext(e.object0),H=G.Provider,Q=G.Consumer,X=(0,e.id)(function(t){return a.createElement(H,{value:t.context},t.children)}),Y=(0,e.id)(function(t){return function(r){return a.createElement(Q,null,function(n){return t(r,n)})}}),Z=o.liftRec(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(){for(var t=0,n=r.length;t<n;++t)e.isFunction(r[t])&&r[t].apply(r,arguments)}}),$=function(t){return function(r){return r[t]()}},tt=$("preventDefault"),rt=$("stopPropagation"),nt=i.join(" ",[i.flatten,i.when(e.id)]),et=o.liftRec(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return nt(r)||void 0}),it=o.liftRec(JSON.parse),ot=o.liftRec(JSON.stringify),at=o.liftRec(Math.abs),ut=o.liftRec(Math.acos),ct=o.liftRec(Math.acosh),ft=o.liftRec(Math.asin),lt=o.liftRec(Math.asinh),st=o.liftRec(Math.atan),ht=o.liftRec(Math.atan2),pt=o.liftRec(Math.atanh),yt=o.liftRec(Math.cbrt),vt=o.liftRec(Math.ceil),mt=o.liftRec(Math.clz32),dt=o.liftRec(Math.cos),gt=o.liftRec(Math.cosh),Mt=o.liftRec(Math.exp),Rt=o.liftRec(Math.expm1),bt=o.liftRec(Math.floor),kt=o.liftRec(Math.fround),wt=o.liftRec(Math.hypot),Pt=o.liftRec(Math.imul),Et=o.liftRec(Math.log),qt=o.liftRec(Math.log10),xt=o.liftRec(Math.log1p),At=o.liftRec(Math.log2),Ut=o.liftRec(Math.max),Dt=o.liftRec(Math.min),St=o.liftRec(Math.pow),_t=o.liftRec(Math.round),Bt=o.liftRec(Math.sign),Ct=o.liftRec(Math.sin),jt=o.liftRec(Math.sinh),Ft=o.liftRec(Math.sqrt),Nt=o.liftRec(Math.tan),Ot=o.liftRec(Math.tanh),Vt=o.liftRec(Math.trunc),Wt=o.liftRec(String.raw),zt=e.curry(function(t,r){var n=o.combines(r,function(r){return t.set(r)});if(u(n))return n.toProperty(c)}),It=e.curry(function(t,n){return n instanceof r.AbstractMutable?u(L(t))?new r.Join(o.combines(t,function(t){return n.view(t)})):n.view(t):o.combines(t,n,i.get)}),Jt=e.curry(function(t,r){var n=[];return e.seq(r,M(function(e,i){var o=e.length,a=i.length;if(a===o)return e;for(var u=Math.min(o,a),c=e.slice(0,u),f=a;f<o;++f)n[f]._onDeactivation();for(var l=u;l<a;++l)c[l]=t(n[l]=It(l,r),l);return n.length=a,c},[]),x)}),Lt=e.curry(function(t,r,n){var o=new Map,a=i.get(t),u=function(t,r,n){return a(t)===n.id};return e.seq(n,M(function(t,e){for(var c=e.length,f=t.length===c?t:Array(c),l=0;l<c;++l){var s=a(e[l]),h=o.get(s);void 0===h&&(o.set(s,h={}),h.id=s,h.hint=l,h.elem=r(h.view=It(i.find(u,h),n),s)),f[l]!==h.elem&&(h.hint=l,f===t&&(f=f.slice(0)),f[l]=h.elem)}return f!==t&&o.forEach(function(t,r){f[t.hint]!==t.elem&&(t.view._onDeactivation(),o.delete(r))}),f},[]),x)});t.holding=r.holding,t.seq=e.seq,t.seqPartial=e.seqPartial,t.combines=o.combines,t.liftRec=o.liftRec,t.debounce=l,t.changes=function(t){return f(t).changes()},t.serially=function(t){return n.concat(t.map(f))},t.parallel=s,t.delay=h,t.endWith=p,t.mapValue=y,t.flatMapParallel=v,t.flatMapSerial=m,t.flatMapErrors=d,t.flatMapLatest=g,t.foldPast=M,t.interval=R,t.later=b,t.lazy=function(t){return e.seq(j(),g(t),j)},t.never=k,t.on=w,t.sampledBy=P,t.skipFirst=E,t.skipDuplicates=q,t.skipIdenticals=x,t.skipUnless=A,t.skipWhen=U,t.startWith=D,t.sink=S,t.takeFirst=_,t.takeFirstErrors=B,t.takeUntilBy=C,t.toProperty=j,t.throttle=F,t.fromEvents=N,t.ignoreValues=function(t){return t.ignoreValues()},t.ignoreErrors=function(t){return t.ignoreErrors()},t.ifElse=V,t.unless=W,t.when=z,t.cond=function(t){for(var r=arguments.length,n=void 0;r--;){var e=arguments[r];n=1!==e.length?O(e[0],e[1],n):e[0]}return n},t.Bus=J,t.bus=function(){return new J},t.scope=function(t){return t()},t.template=L,t.tapPartial=K,t.toPartial=function(t){return o.liftRec(e.arityN(t.length,function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.every(e.isDefined)?t.apply(void 0,n):void 0}))},t.thru=function(t){for(var r=arguments.length,n=void 0,e=1;e<r;++e){var i=arguments[e];n?n.push(i):u(i)?n=[i]:t=i(t)}return n?j(g(function(r){return function(t,r){for(var n=0,e=r.length;n<e;++n)t=r[n](t);return t}(t,r)},L(n))):t},t.show=function(t){for(var r=arguments.length-1,n=Array(r+1),e=0;e<r;++e)n[e]=arguments[e];return n[r]=T,It(o.combines.apply(null,n),arguments[r])},t.onUnmount=function(t){return n.stream(e.always(t)).toProperty(e.always(void 0))},t.Context=X,t.withContext=Y,t.getProps=function(t){return function(r){var n=r.target;for(var e in t)t[e].set(n[e])}},t.setProps=function(t){var r=void 0,n=void 0;return function(e){n&&(r.offAny(n),r=n=null),e&&(n=function(t){switch(t.type){case"value":var i=t.value;for(var o in i)e[o]=i[o];break;case"error":throw t.value;case"end":r=n=null}},(r=L(t)).onAny(n))}},t.refTo=function(t){return function(r){null!==r&&t.set(r)}},t.actions=Z,t.preventDefault=tt,t.stopPropagation=rt,t.cns=et,t.parse=it,t.stringify=ot,t.abs=at,t.acos=ut,t.acosh=ct,t.asin=ft,t.asinh=lt,t.atan=st,t.atan2=ht,t.atanh=pt,t.cbrt=yt,t.ceil=vt,t.clz32=mt,t.cos=dt,t.cosh=gt,t.exp=Mt,t.expm1=Rt,t.floor=bt,t.fround=kt,t.hypot=wt,t.imul=Pt,t.log=Et,t.log10=qt,t.log1p=xt,t.log2=At,t.max=Ut,t.min=Dt,t.pow=St,t.round=_t,t.sign=Bt,t.sin=Ct,t.sinh=jt,t.sqrt=Ft,t.tan=Nt,t.tanh=Ot,t.trunc=Vt,t.string=Wt,t.atom=function(t){return new r.Atom(t)},t.variable=function(){return new r.Atom},t.molecule=function(t){return new r.Molecule(t)},t.set=zt,t.view=It,t.mapElems=Jt,t.mapElemsWithIds=Lt,Object.defineProperty(t,"__esModule",{value:!0})});
