!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("kefir.atom"),require("kefir"),require("infestines"),require("partial.lenses"),require("kefir.combines"),require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","kefir.atom","kefir","infestines","partial.lenses","kefir.combines","react","prop-types"],n):n((t.karet=t.karet||{},t.karet.util={}),t.kefir.atom,t.Kefir,t.I,t.L,t.kefir.combines,t.React,t.PropTypes)}(this,function(t,n,r,e,i,o,c,a){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;var u=function(t){return t instanceof r.Observable},f=function(t){},l=function(t){return u(t)?t:r.constant(t)},s=e.curry(function(t,n){return l(n).debounce(t)}),p=r.merge,h=e.curry(function(t,n){return l(n).delay(t)}),y=e.curry(function(t,n){return l(n).concat(l(t))}),v=e.curry(function(t,n){return l(n).map(t)}),d=e.curry(function(t,n){return l(n).flatMap(e.pipe2U(t,l))}),m=e.curry(function(t,n){return l(n).flatMapConcat(e.pipe2U(t,l))}),g=e.curry(function(t,n){return l(n).flatMapErrors(e.pipe2U(t,l))}),M=e.curry(function(t,n){return l(n).flatMapLatest(e.pipe2U(t,l))}),R=e.curry(function(t,n,r){return l(r).scan(t,n)}),k=e.curry(r.interval),b=e.curry(r.later),w=r.never(),x=e.curry(function(t,n){return l(n).onAny((r=t,function(t){var n;return(n=r[t.type])&&n(t.value)}));var r}),q=e.curry(function(t,n){return l(n).sampledBy(t)}),P=e.curry(function(t,n){return l(n).skip(t)}),E=e.curry(function(t,n){return l(n).skipDuplicates(t)}),A=E(e.identicalU),U=e.curry(function(t,n){return l(n).filter(t)}),C=e.curry(function(t,n){return l(n).filter(function(n){return!t(n)})}),S=e.curry(function(t,n){return l(n).toProperty(function(){return t})}),_=e.pipe2U(S(void 0),o.lift1(f)),B=e.curry(function(t,n){return l(n).take(t)}),D=e.curry(function(t,n){return l(n).takeErrors(t)}),O=e.curry(function(t,n){return l(n).takeUntilBy(t)}),F=function(t){return l(t).toProperty()},N=e.curry(function(t,n){return l(n).throttle(t)}),T=e.curry(r.fromEvents),V=function(t,n,r){return F(M(function(t){return t?n:r},t))},W=e.curry(V),j=e.curry(function(t,n){return V(t,void 0,n)}),z=e.arityN(2,V),I=r.Stream.prototype,J=e.inherit(function(){r.Stream.call(this)},r.Stream,{push:I._emitValue,error:I._emitError,end:I._emitEnd}),L=function(t){return o.combines(t,e.id)},K=o.liftRec(e.curry(function(t,n){return void 0!==n&&t(n),n})),G=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.iso(function(t){return console.log.apply(console,n.concat([t]))||t},function(t){return console.log.apply(console,n.concat([t,"(set)"]))||t})},H={context:a.any},Q=e.inherit(function(t){c.Component.call(this,t)},c.Component,{getChildContext:function(){return{context:this.props.context}},render:function(){return this.props.children}},{childContextTypes:H}),X=o.liftRec(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(){for(var t=0,r=n.length;t<r;++t)e.isFunction(n[t])&&n[t].apply(n,arguments)}}),Y=i.join(" ",[i.flatten,i.when(e.id)]),Z=o.liftRec(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(n)||void 0}),$=o.liftRec(JSON.parse),tt=o.liftRec(JSON.stringify),nt=o.liftRec(Math.abs),rt=o.liftRec(Math.acos),et=o.liftRec(Math.acosh),it=o.liftRec(Math.asin),ot=o.liftRec(Math.asinh),ct=o.liftRec(Math.atan),at=o.liftRec(Math.atan2),ut=o.liftRec(Math.atanh),ft=o.liftRec(Math.cbrt),lt=o.liftRec(Math.ceil),st=o.liftRec(Math.clz32),pt=o.liftRec(Math.cos),ht=o.liftRec(Math.cosh),yt=o.liftRec(Math.exp),vt=o.liftRec(Math.expm1),dt=o.liftRec(Math.floor),mt=o.liftRec(Math.fround),gt=o.liftRec(Math.hypot),Mt=o.liftRec(Math.imul),Rt=o.liftRec(Math.log),kt=o.liftRec(Math.log10),bt=o.liftRec(Math.log1p),wt=o.liftRec(Math.log2),xt=o.liftRec(Math.max),qt=o.liftRec(Math.min),Pt=o.liftRec(Math.pow),Et=o.liftRec(Math.round),At=o.liftRec(Math.sign),Ut=o.liftRec(Math.sin),Ct=o.liftRec(Math.sinh),St=o.liftRec(Math.sqrt),_t=o.liftRec(Math.tan),Bt=o.liftRec(Math.tanh),Dt=o.liftRec(Math.trunc),Ot=o.liftRec(String.raw),Ft=e.curry(function(t,n){var r=o.combines(n,function(n){return t.set(n)});if(u(r))return r.toProperty(f)}),Nt=e.curry(function(t,r){return r instanceof n.AbstractMutable?u(L(t))?new n.Join(o.combines(t,function(t){return r.view(t)})):r.view(t):o.combines(t,r,i.get)}),Tt=e.curry(function(t,n){var r=[];return e.seq(n,R(function(e,i){var o=e.length,c=i.length;if(c===o)return e;for(var a=Math.min(o,c),u=e.slice(0,a),f=c;f<o;++f)r[f]._onDeactivation();for(var l=a;l<c;++l)u[l]=t(r[l]=Nt(l,n),l);return r.length=c,u},[]),A)}),Vt=e.curry(function(t,n,r){var o=new Map,c=i.get(t),a=function(t,n,r){return c(t)===r.id};return e.seq(r,R(function(t,e){for(var u=e.length,f=t.length===u?t:Array(u),l=0;l<u;++l){var s=c(e[l]),p=o.get(s);void 0===p&&(o.set(s,p={}),p.id=s,p.hint=l,p.elem=n(p.view=Nt(i.find(a,p),r),s)),f[l]!==p.elem&&(p.hint=l,f===t&&(f=f.slice(0)),f[l]=p.elem)}return f!==t&&o.forEach(function(t,n){f[t.hint]!==t.elem&&(t.view._onDeactivation(),o.delete(n))}),f},[]),A)});t.holding=n.holding,t.seq=e.seq,t.seqPartial=e.seqPartial,t.combines=o.combines,t.liftRec=o.liftRec,t.debounce=s,t.changes=function(t){return l(t).changes()},t.serially=function(t){return r.concat(t.map(l))},t.parallel=p,t.delay=h,t.endWith=y,t.mapValue=v,t.flatMapParallel=d,t.flatMapSerial=m,t.flatMapErrors=g,t.flatMapLatest=M,t.foldPast=R,t.interval=k,t.later=b,t.lazy=function(t){return e.seq(F(),M(t),F)},t.never=w,t.on=x,t.sampledBy=q,t.skipFirst=P,t.skipDuplicates=E,t.skipIdenticals=A,t.skipUnless=U,t.skipWhen=C,t.startWith=S,t.sink=_,t.takeFirst=B,t.takeFirstErrors=D,t.takeUntilBy=O,t.toProperty=F,t.throttle=N,t.fromEvents=T,t.ignoreValues=function(t){return t.ignoreValues()},t.ignoreErrors=function(t){return t.ignoreErrors()},t.ifElse=W,t.unless=j,t.when=z,t.cond=function(t){for(var n=arguments.length,r=void 0;n--;){var e=arguments[n];r=1!==e.length?V(e[0],e[1],r):e[0]}return r},t.Bus=J,t.bus=function(){return new J},t.scope=function(t){return t()},t.template=L,t.tapPartial=K,t.toPartial=function(t){return o.liftRec(e.arityN(t.length,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.every(e.isDefined)?t.apply(void 0,r):void 0}))},t.thru=function(t){for(var n=arguments.length,r=void 0,e=1;e<n;++e){var i=arguments[e];r?r.push(i):u(i)?r=[i]:t=i(t)}return r?F(M(function(n){return function(t,n){for(var r=0,e=n.length;r<e;++r)t=n[r](t);return t}(t,n)},L(r))):t},t.show=function(t){for(var n=arguments.length-1,r=Array(n+1),e=0;e<n;++e)r[e]=arguments[e];return r[n]=G,Nt(o.combines.apply(null,r),arguments[n])},t.onUnmount=function(t){return r.stream(e.always(t)).toProperty(e.always(void 0))},t.Context=Q,t.withContext=function(t){var n=function(n,r){return t(n,r.context)};return n.contextTypes=H,n},t.getProps=function(t){return function(n){var r=n.target;for(var e in t)t[e].set(r[e])}},t.setProps=function(t){var n=void 0,r=void 0;return function(e){r&&(n.offAny(r),n=r=null),e&&(r=function(t){switch(t.type){case"value":var i=t.value;for(var o in i)e[o]=i[o];break;case"error":throw t.value;case"end":n=r=null}},(n=L(t)).onAny(r))}},t.refTo=function(t){return function(n){null!==n&&t.set(n)}},t.actions=X,t.cns=Z,t.parse=$,t.stringify=tt,t.abs=nt,t.acos=rt,t.acosh=et,t.asin=it,t.asinh=ot,t.atan=ct,t.atan2=at,t.atanh=ut,t.cbrt=ft,t.ceil=lt,t.clz32=st,t.cos=pt,t.cosh=ht,t.exp=yt,t.expm1=vt,t.floor=dt,t.fround=mt,t.hypot=gt,t.imul=Mt,t.log=Rt,t.log10=kt,t.log1p=bt,t.log2=wt,t.max=xt,t.min=qt,t.pow=Pt,t.round=Et,t.sign=At,t.sin=Ut,t.sinh=Ct,t.sqrt=St,t.tan=_t,t.tanh=Bt,t.trunc=Dt,t.string=Ot,t.atom=function(t){return new n.Atom(t)},t.variable=function(){return new n.Atom},t.molecule=function(t){return new n.Molecule(t)},t.set=Ft,t.view=Nt,t.mapElems=Tt,t.mapElemsWithIds=Vt,Object.defineProperty(t,"__esModule",{value:!0})});
